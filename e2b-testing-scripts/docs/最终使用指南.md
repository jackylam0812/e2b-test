# E2B å¤šäº‘æ€§èƒ½æµ‹è¯• - æœ€ç»ˆä½¿ç”¨æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®ç”¨äºæµ‹è¯•å’Œå¯¹æ¯” E2B æœåŠ¡åœ¨ä¸åŒäº‘å¹³å°ä¸Šçš„æ€§èƒ½è¡¨ç°ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **ä¸‰å±‚æ¶æ„** - Host / Client / Sandbox æ¸…æ™°åˆ†ç¦»
- âœ… **ç‰ˆæœ¬é”å®š** - e2b 1.1.0,ç¯å¢ƒä¸€è‡´
- âœ… **è‡ªåŠ¨åŒ–æµ‹è¯•** - å¯åŠ¨å»¶è¿Ÿè‡ªåŠ¨æµ‹è¯•
- âœ… **æ‰‹åŠ¨æµ‹è¯•** - å®¿ä¸»æœºå’Œæ²™ç®±å†…æ€§èƒ½
- âœ… **å¯è§†åŒ–æŠ¥å‘Š** - å¤šäº‘æ€§èƒ½å¯¹æ¯”

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

```bash
# 1. å®‰è£…ä¾èµ–
pip3 install -r requirements.txt

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .e2b_env.template .e2b_env
vim .e2b_env  # å¡«å…¥é…ç½®

# 3. éªŒè¯
source .e2b_env
python3 -c "from e2b import Sandbox; print('âœ“ SDK å¯ç”¨')"
```

---

## ğŸ“Š æµ‹è¯•æ‰§è¡Œæµç¨‹

### æ–¹æ¡ˆ1: å®Œæ•´æµ‹è¯•(æ¨è)

#### æ­¥éª¤1: åœ¨å®¿ä¸»æœºä¸Šè¿è¡Œç¡¬ä»¶æµ‹è¯•

```bash
# SSH åˆ° orchestrator æœºå™¨
cd awsdev-tpl/tests/host

# è¿è¡Œå®¿ä¸»æœºæµ‹è¯•
bash run_host_tests.sh ../../outputs/aws

# å¯é€‰: äº‘å­˜å‚¨æµ‹è¯•
export S3_BUCKET=your-bucket
bash run_host_tests.sh ../../outputs/aws
```

**è¾“å‡º**:
- `outputs/aws/04_host_performance.json` - CPU/ç£ç›˜/å†…å­˜
- `outputs/aws/05_cloud_storage.json` - äº‘å­˜å‚¨æ€§èƒ½

#### æ­¥éª¤2: åœ¨å®¢æˆ·ç«¯è¿è¡Œå¯åŠ¨å»¶è¿Ÿæµ‹è¯•

```bash
# åœ¨å®¿ä¸»æœºæˆ–èƒ½è¿æ¥åˆ° E2B API çš„æœºå™¨
cd awsdev-tpl
source .e2b_env

# è®¾ç½®äº‘æ ‡è¯†
export CLOUD_PROVIDER=aws

# è¿è¡Œå®¢æˆ·ç«¯æµ‹è¯•
python3 tests/client/run_all_tests.py --output-dir outputs/aws
```

**è¾“å‡º**:
- `outputs/aws/01_cold_start.json` - å†·å¯åŠ¨å»¶è¿Ÿ
- `outputs/aws/01_warm_start.json` - çƒ­å¯åŠ¨å»¶è¿Ÿ
- `outputs/aws/summary_report.json` - ç»¼åˆæŠ¥å‘Š

#### æ­¥éª¤3: (å¯é€‰)æ‰‹åŠ¨æµ‹è¯•æ²™ç®±å†…æ€§èƒ½

```bash
# è¿›å…¥æ²™ç®±
e2b sandbox spawn next_agent_sandbox_aws_test_new

# åœ¨æ²™ç®±å†…,ç²˜è´´å¹¶è¿è¡Œ tests/sandbox/run_all_tests.sh çš„å†…å®¹
# ...

# å¤åˆ¶è¾“å‡ºçš„ JSON åˆ°:
# outputs/aws/sandbox_performance_manual.json
```

#### æ­¥éª¤4: åœ¨å…¶ä»–äº‘é‡å¤æ­¥éª¤1-3

```bash
# GCP
bash tests/host/run_host_tests.sh outputs/gcp
python3 tests/client/run_all_tests.py --output-dir outputs/gcp

# Azure
bash tests/host/run_host_tests.sh outputs/azure
python3 tests/client/run_all_tests.py --output-dir outputs/azure
```

#### æ­¥éª¤5: ç”Ÿæˆå¤šäº‘å¯¹æ¯”æŠ¥å‘Š

```bash
# æŸ¥çœ‹å·²æœ‰ç»“æœ
python3 tests/client/cloud_manager.py list

# ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Š
python3 tests/client/generate_visual_report.py

# æŸ¥çœ‹æŠ¥å‘Š
cat outputs/reports/visual_report.md
```

---

### æ–¹æ¡ˆ2: å¿«é€Ÿæµ‹è¯•(åªæµ‹å¯åŠ¨å»¶è¿Ÿ)

```bash
# é€‚åˆå¿«é€ŸéªŒè¯,ä¸éœ€è¦å®¿ä¸»æœºè®¿é—®æƒé™
source .e2b_env
export CLOUD_PROVIDER=aws
python3 tests/client/run_all_tests.py --output-dir outputs/aws
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
awsdev-tpl/
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ host/              # åœ¨å®¿ä¸»æœºä¸Šæ‰§è¡Œ
â”‚   â”‚   â”œâ”€â”€ run_host_tests.sh        â­ ä¸»å…¥å£
â”‚   â”‚   â”œâ”€â”€ 04_host_performance.py   # CPU/ç£ç›˜/å†…å­˜
â”‚   â”‚   â””â”€â”€ 05_cloud_storage.py      # S3/GCS æ€§èƒ½
â”‚   â”‚
â”‚   â”œâ”€â”€ client/            # åœ¨æµ‹è¯•å®¢æˆ·ç«¯æ‰§è¡Œ
â”‚   â”‚   â”œâ”€â”€ run_all_tests.py         â­ ä¸»å…¥å£
â”‚   â”‚   â”œâ”€â”€ 01_sandbox_lifecycle.py  # å¯åŠ¨å»¶è¿Ÿ
â”‚   â”‚   â”œâ”€â”€ cloud_manager.py         # ç»“æœç®¡ç†
â”‚   â”‚   â””â”€â”€ generate_visual_report.py # å¯è§†åŒ–æŠ¥å‘Š
â”‚   â”‚
â”‚   â””â”€â”€ sandbox/           # åœ¨æ²™ç®±å†…éƒ¨æ‰§è¡Œ(æ‰‹åŠ¨)
â”‚       â””â”€â”€ run_all_tests.sh         â­ å®Œæ•´æµ‹è¯•è„šæœ¬
â”‚
â”œâ”€â”€ outputs/               # æµ‹è¯•ç»“æœ
â”‚   â”œâ”€â”€ aws/
â”‚   â”œâ”€â”€ gcp/
â”‚   â””â”€â”€ reports/
â”‚
â”œâ”€â”€ requirements.txt       # Python ä¾èµ–(ç‰ˆæœ¬é”å®š)
â”œâ”€â”€ .e2b_env              # ç¯å¢ƒé…ç½®
â””â”€â”€ setup.sh              # ç¯å¢ƒè®¾ç½®è„šæœ¬
```

---

## ğŸ¯ å¯æµ‹è¯•çš„æ€§èƒ½æŒ‡æ ‡

### âœ… è‡ªåŠ¨æµ‹è¯•

| æŒ‡æ ‡ | æ‰§è¡Œä½ç½® | é‡è¦æ€§ |
|------|----------|--------|
| CPU æ€§èƒ½ | Host | ğŸ”´ æ ¸å¿ƒ |
| ç£ç›˜ I/O | Host | ğŸ”´ æ ¸å¿ƒ |
| å¤§é¡µå†…å­˜ | Host | ğŸ”´ æ ¸å¿ƒ |
| å†·å¯åŠ¨å»¶è¿Ÿ | Client | ğŸ”´ æ ¸å¿ƒ |
| çƒ­å¯åŠ¨å»¶è¿Ÿ | Client | ğŸ”´ æ ¸å¿ƒ |
| äº‘å­˜å‚¨æ€§èƒ½ | Host | ğŸŸ¡ é‡è¦ |

### ğŸ”§ æ‰‹åŠ¨æµ‹è¯•

| æŒ‡æ ‡ | æ‰§è¡Œä½ç½® | é‡è¦æ€§ |
|------|----------|--------|
| æ²™ç®±å†… CPU | Sandbox | ğŸŸ¡ é‡è¦ |
| æ²™ç®±å†…ç£ç›˜ | Sandbox | ğŸŸ¡ é‡è¦ |
| æ²™ç®±å†…ç½‘ç»œ | Sandbox | ğŸŸ¡ é‡è¦ |
| Python æ€§èƒ½ | Sandbox | ğŸŸ¡ é‡è¦ |
| åŒ…ç®¡ç†å™¨é€Ÿåº¦ | Sandbox | ğŸŸ¡ é‡è¦ |

**æ ¸å¿ƒè‡ªåŠ¨åŒ–æŒ‡æ ‡å·²è¦†ç›– 6/12,è¶³ä»¥è¿›è¡Œæœ‰ä»·å€¼çš„å¤šäº‘å¯¹æ¯”!**

---

## ğŸ”§ æŠ€æœ¯è§„æ ¼

### è½¯ä»¶ç‰ˆæœ¬

- **Python SDK**: e2b==1.1.0 (å›ºå®š)
- **Envd**: 0.2.0 (æœåŠ¡ç«¯)
- **Python**: 3.8+
- **ç³»ç»Ÿå·¥å…·**: sysbench, fio, iperf3

### ç¯å¢ƒè¦æ±‚

- **å®¿ä¸»æœº**: E2B orchestrator æœºå™¨,éœ€è¦ SSH è®¿é—®
- **å®¢æˆ·ç«¯**: èƒ½è¿æ¥åˆ° E2B API çš„æœºå™¨
- **ç½‘ç»œ**: å®¿ä¸»æœºéœ€è¦è®¿é—®äº‘å­˜å‚¨(S3/GCS)

---

## âš ï¸  å·²çŸ¥é™åˆ¶

### Python SDK å…¼å®¹æ€§é—®é¢˜

- **ç°è±¡**: æ— æ³•åœ¨æ²™ç®±å†…è‡ªåŠ¨æ‰§è¡Œå‘½ä»¤("Invalid host")
- **åŸå› **: e2b 1.1.0 ä¸ envd 0.2.0 çš„ RPC è¿æ¥é—®é¢˜
- **å½±å“**: æ²™ç®±å†…æ€§èƒ½æµ‹è¯•éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ
- **ä¸´æ—¶æ–¹æ¡ˆ**: ä½¿ç”¨ `tests/sandbox/run_all_tests.sh` æ‰‹åŠ¨æµ‹è¯•

### è§£å†³é€”å¾„

1. **å‡çº§ envd** - è”ç³» E2B æœåŠ¡ç®¡ç†å‘˜
2. **æ‰‹åŠ¨æµ‹è¯•** - ä½¿ç”¨æä¾›çš„æ²™ç®±å†…è„šæœ¬
3. **æœªæ¥**: envd å‡çº§åå¯å¯ç”¨å®Œå…¨è‡ªåŠ¨åŒ–

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®ç»“æ„è¯´æ˜.md](é¡¹ç›®ç»“æ„è¯´æ˜.md) - ä¸‰å±‚æ¶æ„è¯¦è§£
- [æµ‹è¯•æ‰§è¡ŒæŒ‡å—.md](æµ‹è¯•æ‰§è¡ŒæŒ‡å—.md) - è¯¦ç»†æ“ä½œæ­¥éª¤
- [å·²çŸ¥é—®é¢˜å’Œä¸´æ—¶æ–¹æ¡ˆ.md](å·²çŸ¥é—®é¢˜å’Œä¸´æ—¶æ–¹æ¡ˆ.md) - é—®é¢˜è¯´æ˜
- [å¿«é€Ÿå¼€å§‹.md](å¿«é€Ÿå¼€å§‹.md) - å¿«é€Ÿå…¥é—¨

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **ç‰ˆæœ¬ä¸€è‡´æ€§** - æ‰€æœ‰ç¯å¢ƒä½¿ç”¨ç›¸åŒçš„ `requirements.txt`
2. **ç‹¬ç«‹è¿è¡Œ** - Host/Client/Sandbox æµ‹è¯•ç‹¬ç«‹æ‰§è¡Œ
3. **ç»“æœæ”¶é›†** - é›†ä¸­åˆ° `outputs/{cloud}/` ç›®å½•
4. **å®šæœŸæµ‹è¯•** - å»ºè®®æ¯å‘¨æˆ–æ¯æœˆè¿›è¡Œä¸€æ¬¡å¤šäº‘å¯¹æ¯”

---

## ğŸŠ æˆåŠŸæ¡ˆä¾‹

ä½ å·²ç»æˆåŠŸè¿è¡Œæµ‹è¯•å¹¶è·å¾—:
- âœ… å†·å¯åŠ¨å»¶è¿Ÿ: P95 = 10.9ç§’, å¹³å‡ = 7.5ç§’
- âœ… çƒ­å¯åŠ¨å»¶è¿Ÿ: P95 = 6.1ç§’, å¹³å‡ = 2.8ç§’

**æ¡†æ¶å®Œå…¨å°±ç»ª,å¯ä»¥å¼€å§‹å¤šäº‘å¯¹æ¯”äº†!** ğŸš€

---

*æœ€åæ›´æ–°: 2025-11-24*
